<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест вибору кольорів</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .color-block {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .color-circle {
            display: inline-block;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 5px;
            cursor: pointer;
            border: 2px solid #ddd;
            position: relative;
        }
        .color-circle.selected {
            border-color: #60A5FA;
        }
        .color-circle span {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            white-space: nowrap;
            display: none;
        }
        .color-circle:hover span {
            display: block;
        }
        .selected-colors {
            margin-top: 20px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
        }
        .add-to-cart-btn {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        .add-to-cart-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <h1>Тест незалежного вибору кольорів</h1>
    
    <div class="color-block">
        <h3>Блок 1: Колір корпусу</h3>
        <div id="color-options-1-0">
            <div class="color-circle" data-index="0" data-block-index="0" style="background: #8B4513;">
                <span>Коричневий</span>
            </div>
            <div class="color-circle" data-index="1" data-block-index="0" style="background: #000000;">
                <span>Чорний</span>
            </div>
            <div class="color-circle" data-index="2" data-block-index="0" style="background: #FFFFFF;">
                <span>Білий</span>
            </div>
        </div>
    </div>
    
    <div class="color-block">
        <h3>Блок 2: Колір фасаду</h3>
        <div id="color-options-1-1">
            <div class="color-circle" data-index="0" data-block-index="1" style="background: #FFD700;">
                <span>Золотий</span>
            </div>
            <div class="color-circle" data-index="1" data-block-index="1" style="background: #C0C0C0;">
                <span>Срібний</span>
            </div>
            <div class="color-circle" data-index="2" data-block-index="1" style="background: #CD7F32;">
                <span>Бронзовий</span>
            </div>
        </div>
    </div>
    
    <div class="selected-colors">
        <h3>Вибрані кольори:</h3>
        <div id="selected-colors-display">Не вибрано</div>
    </div>
    
    <button class="add-to-cart-btn" onclick="addToCart()">Додати в кошик</button>
    
    <script>
        // Імітація структури даних
        const selectedColors = {};
        const productId = '1';
        
        // Функція вибору кольору
        function selectColor(productId, blockIndex, globalIndex) {
            if (!selectedColors[productId]) {
                selectedColors[productId] = {};
            }
            selectedColors[productId][blockIndex] = globalIndex;
            
            // Оновлюємо підсвічування
            const colorCircles = document.querySelectorAll(`#color-options-${productId}-${blockIndex} .color-circle`);
            colorCircles.forEach((circle, idx) => {
                if (idx === globalIndex % 3) { // Припускаємо 3 кольори в кожному блоці
                    circle.classList.add('selected');
                } else {
                    circle.classList.remove('selected');
                }
            });
            
            updateSelectedColorsDisplay();
        }
        
        // Функція оновлення відображення вибраних кольорів
        function updateSelectedColorsDisplay() {
            const display = document.getElementById('selected-colors-display');
            const selected = selectedColors[productId];
            
            if (!selected || Object.keys(selected).length === 0) {
                display.textContent = 'Не вибрано';
                return;
            }
            
            const colorNames = [];
            Object.entries(selected).forEach(([blockIndex, globalIndex]) => {
                const blockName = blockIndex === '0' ? 'Корпус' : 'Фасад';
                const colorIndex = globalIndex % 3;
                const colorNamesArray = ['Коричневий', 'Чорний', 'Білий'];
                const colorName = colorNamesArray[colorIndex];
                colorNames.push(`${blockName}: ${colorName}`);
            });
            
            display.textContent = colorNames.join(', ');
        }
        
        // Додаємо обробники подій для кольорів
        document.querySelectorAll('.color-circle').forEach(circle => {
            circle.addEventListener('click', function() {
                const blockIndex = parseInt(this.getAttribute('data-block-index'));
                const colorIndex = parseInt(this.getAttribute('data-index'));
                const globalIndex = blockIndex * 3 + colorIndex;
                selectColor(productId, blockIndex, globalIndex);
            });
        });
        
        // Функція додавання в кошик
        function addToCart() {
            const selected = selectedColors[productId];
            
            if (!selected || Object.keys(selected).length < 2) {
                alert('Виберіть колір з кожного блоку!');
                return;
            }
            
            const colorNames = [];
            Object.entries(selected).forEach(([blockIndex, globalIndex]) => {
                const blockName = blockIndex === '0' ? 'Корпус' : 'Фасад';
                const colorIndex = globalIndex % 3;
                const colorNamesArray = ['Коричневий', 'Чорний', 'Білий'];
                const colorName = colorNamesArray[colorIndex];
                colorNames.push(`${blockName}: ${colorName}`);
            });
            
            alert(`Товар додано в кошик з кольорами: ${colorNames.join(', ')}`);
        }
    </script>
</body>
</html> 